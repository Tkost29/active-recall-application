# AI学習アプリケーション

ChatGPT APIを使用した間隔反復学習（Spaced Repetition）アプリケーションです。用語を登録し、AIが生成する問題に回答し、自動採点を受けることができます。7段階のレベルシステムで効率的な学習をサポートします。

## ✨ 主な機能

### 📚 4つのセクション（ボトムナビゲーション）

1. **📝 用語登録**
   - 学習したい用語とその説明を登録
   - レベルと進捗の可視化（プログレスバー）
   - 次回復習日の自動計算と表示
   - 正解率の統計表示

2. **✏️ 問題を解く**
   - **2つのモード**から選択可能：
     - **📝 練習モード**: すべての用語から出題、レベルに影響なし
     - **🎯 レベルアップモード**: 復習可能な用語のみ出題、正解でレベルアップ、**不正解でレベル0にリセット**
   - AIが登録した用語に基づいて問題を自動生成
   - 70点以上で合格判定

3. **📊 学習記録**
   - 解いた問題数の統計
   - 平均スコアの表示
   - 学習履歴（日時、用語、スコア、レベル変化）
   - モード別（練習/レベルアップ）の記録

4. **📖 用語集**
   - 登録した用語の一覧表示
   - 各用語のレベルと進捗状況
   - 用語の検索機能（名前・説明で検索）
   - 次回復習日の表示

### 🎯 7段階レベルシステム（間隔反復学習）

| レベル | 名称 | 復習間隔 | 条件 |
|--------|------|----------|------|
| Lv0 | 未学習 | - | 初回登録時 |
| Lv1 | 初回 | - | 初回学習完了 |
| Lv2 | 短期 | 2〜5時間後 | Lv1から正解 |
| Lv3 | 1日 | 1〜2日後 | Lv2から正解 |
| Lv4 | 3日 | 3〜4日後 | Lv3から正解 |
| Lv5 | 1週 | 7〜8日後 | Lv4から正解 |
| Lv6 | 2週 | 14〜15日後 | Lv5から正解 |
| Lv7 | 完璧 | 31〜32日後 | Lv6から正解（マスター！） |

**重要**: レベルアップモードで不正解の場合、**レベルが0にリセット**されます！

## セットアップ手順

### 1. 依存パッケージのインストール

```powershell
npm install
```

### 2. 環境変数の設定

`.env.example`ファイルを`.env`にコピーし、OpenAI APIキーを設定してください。

```powershell
Copy-Item .env.example .env
```

`.env`ファイルを開いて、以下のように設定してください：

```
OPENAI_API_KEY=sk-your-actual-api-key-here
PORT=3000
```

### 3. OpenAI APIキーの取得方法

1. [OpenAI](https://platform.openai.com/)にアクセス
2. アカウントを作成またはログイン
3. [API Keys](https://platform.openai.com/api-keys)ページへ移動
4. "Create new secret key"をクリックしてAPIキーを生成
5. 生成されたキーを`.env`ファイルに貼り付け

### 4. サーバーの起動

```powershell
npm start
```

開発モード（自動再起動）で起動する場合：

```powershell
npm run dev
```

### 5. アプリケーションの使用

1. ブラウザで`main-page/main.html`を開く
2. 用語名と説明を入力して「用語を追加」をクリック
3. 複数の用語を登録したら「問題作成へ進む」をクリック
4. 生成された問題に回答を入力
5. 「回答を提出」をクリックして採点結果を確認

## ファイル構成

```
learning-application/
├── server.js              # バックエンドサーバー
├── package.json           # Node.js依存関係
├── .env                   # 環境変数（要作成）
├── .env.example           # 環境変数のサンプル
├── README.md              # このファイル
└── main-page/
    ├── main.html          # メインHTML
    ├── style.css          # スタイルシート
    └── app.js             # フロントエンドJavaScript
```

## 注意事項

- OpenAI APIの使用には料金が発生します
- APIキーは絶対に公開しないでください
- `.env`ファイルは`.gitignore`に追加してください

## トラブルシューティング

### サーバーが起動しない
- Node.jsがインストールされているか確認
- `npm install`を実行したか確認
- `.env`ファイルが存在し、正しいAPIキーが設定されているか確認

### 問題が生成されない
- サーバーが起動しているか確認（http://localhost:3000）
- ブラウザの開発者ツールでエラーを確認
- OpenAI APIキーが有効か確認
- APIの利用制限に達していないか確認

### CORSエラー
- サーバーが正しく起動しているか確認
- ポート番号が一致しているか確認（デフォルト: 3000）
